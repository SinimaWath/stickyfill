/*!
  * Stickyfill â€“ `position: sticky` polyfill
  * v. 2.1.0-fix-scroll-container-5 | https://github.com/wilddeer/stickyfill
  * MIT License
  */

!function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}function e(a){return parseFloat(a)||0}function f(a){for(var b=0;a;)b+=a.offsetTop,a=a.offsetParent;return b}function g(){function c(){console.log("Window Y offset: ",m.scrollTop),console.log("Window X offset: ",m.scrollLeft),m.scrollLeft!==p.left?(p.top=m.scrollTop,p.left=m.scrollLeft,s.refreshAll()):m.pageYOffset!==p.top&&(p.top=m.scrollTop,p.left=m.scrollLeft,q.forEach(function(a){return a._recalcPosition()}))}function d(){f=setInterval(function(){q.forEach(function(a){return a._fastCheck()})},500)}function e(){clearInterval(f)}if(!l){l=!0,c(),m.addEventListener("scroll",c,!0),a.addEventListener("resize",s.refreshAll),a.addEventListener("orientationchange",s.refreshAll);var f=void 0,g=void 0,h=void 0;"hidden"in b?(g="hidden",h="visibilitychange"):"webkitHidden"in b&&(g="webkitHidden",h="webkitvisibilitychange"),h?(b[g]||d(),b.addEventListener(h,function(){b[g]?e():d()})):d()}}var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=!1,j=void 0!==a;if(j&&a.getComputedStyle){var k=b.createElement("div");["","-webkit-","-moz-","-ms-"].some(function(a){try{k.style.position=a+"sticky"}catch(a){}return""!=k.style.position})&&(i=!0)}else i=!0;var l=!1,m=a;Object.defineProperty(m,"scrollTop",{get:function(){return this.pageYOffset}}),Object.defineProperty(m,"scrollLeft",{get:function(){return this.pageXOffset}});var n=0,o="undefined"!=typeof ShadowRoot,p={top:null,left:null},q=[],r=function(){function a(b){if(c(this,a),!(b instanceof HTMLElement))throw new Error("First argument must be HTMLElement");if(q.some(function(a){return a._node===b}))throw new Error("Stickyfill is already applied to this node");this._node=b,this._stickyMode=null,this._active=!1,q.push(this),this.refresh()}return h(a,[{key:"refresh",value:function(){if(!i&&!this._removed){this._active&&this._deactivate();var a=this._node,c=getComputedStyle(a),g={position:c.position,top:n||c.top,display:c.display,marginTop:c.marginTop,marginBottom:c.marginBottom,marginLeft:c.marginLeft,marginRight:c.marginRight,cssFloat:c.cssFloat};if(!isNaN(parseFloat(g.top))&&"table-cell"!=g.display&&"none"!=g.display){this._active=!0;var h=a.style.position;"sticky"!=c.position&&"-webkit-sticky"!=c.position||(a.style.position="static");var j=a.parentNode,k=o&&j instanceof ShadowRoot?j.host:j,l=a.getBoundingClientRect(),p=k.getBoundingClientRect(),q=getComputedStyle(k);this._parent={node:k,styles:{position:k.style.position},offsetHeight:k.offsetHeight},this._offsetToWindow={left:l.left,right:b.documentElement.clientWidth-l.right},this._offsetToParent={top:l.top-p.top-e(q.borderTopWidth),left:l.left-p.left-e(q.borderLeftWidth),right:-l.right+p.right-e(q.borderRightWidth)},this._styles={position:h,top:n||a.style.top,bottom:a.style.bottom,left:a.style.left,right:a.style.right,width:a.style.width,marginTop:a.style.marginTop,marginLeft:a.style.marginLeft,marginRight:a.style.marginRight};var r=e(g.top);console.log(l.top,m.scrollTop,r),this._limits={start:l.top+m.scrollTop-r,end:p.top+m.scrollTop+k.offsetHeight-e(q.borderBottomWidth)-a.offsetHeight-r-e(g.marginBottom)};var s=q.position;"absolute"!=s&&"relative"!=s&&(k.style.position="relative"),this._recalcPosition();var t=this._clone={};t.node=b.createElement("div"),d(t.node.style,{width:l.right-l.left+"px",height:l.bottom-l.top+"px",marginTop:g.marginTop,marginBottom:g.marginBottom,marginLeft:g.marginLeft,marginRight:g.marginRight,cssFloat:g.cssFloat,padding:0,border:0,borderSpacing:0,fontSize:"1em",position:"static"}),j.insertBefore(t.node,a),t.docOffsetTop=f(t.node)}}}},{key:"_recalcPosition",value:function(){if(this._active&&!this._removed){console.log("Limits: ",this._limits);var a=p.top<=this._limits.start?"start":p.top>=this._limits.end?"end":"middle";if(this._stickyMode!=a){switch(a){case"start":d(this._node.style,{position:"absolute",left:this._offsetToParent.left+"px",right:this._offsetToParent.right+"px",top:this._offsetToParent.top+"px",bottom:"auto",width:"auto",marginLeft:0,marginRight:0,marginTop:0});break;case"middle":console.log("TOP: ",n||this._styles.top),d(this._node.style,{position:"fixed",left:this._offsetToWindow.left+"px",right:this._offsetToWindow.right+"px",top:(n||this._styles.top)+"px",bottom:"auto",width:"auto",marginLeft:0,marginRight:0,marginTop:0}),console.log("Node: ",this._node.style.top);break;case"end":d(this._node.style,{position:"absolute",left:this._offsetToParent.left+"px",right:this._offsetToParent.right+"px",top:"auto",bottom:0,width:"auto",marginLeft:0,marginRight:0})}this._stickyMode=a}}}},{key:"_fastCheck",value:function(){this._active&&!this._removed&&(Math.abs(f(this._clone.node)-this._clone.docOffsetTop)>1||Math.abs(this._parent.node.offsetHeight-this._parent.offsetHeight)>1)&&this.refresh()}},{key:"_deactivate",value:function(){var a=this;this._active&&!this._removed&&(this._clone.node.parentNode.removeChild(this._clone.node),delete this._clone,d(this._node.style,this._styles),delete this._styles,q.some(function(b){return b!==a&&b._parent&&b._parent.node===a._parent.node})||d(this._parent.node.style,this._parent.styles),delete this._parent,this._stickyMode=null,this._active=!1,delete this._offsetToWindow,delete this._offsetToParent,delete this._limits)}},{key:"remove",value:function(){var a=this;this._deactivate(),q.some(function(b,c){if(b._node===a._node)return q.splice(c,1),!0}),this._removed=!0}}]),a}(),s={stickies:q,Sticky:r,setTopOffset:function(a){n=a},setScrollContainer:function(a){if(!(a&&a instanceof HTMLElement))return null;m=a},forceSticky:function(){i=!1,g(),this.refreshAll()},add:function(a){if(a instanceof HTMLElement&&(a=[a]),a.length){for(var b=[],c=0;c<a.length;c++){(function(c){var d=a[c];d instanceof HTMLElement?q.some(function(a){if(a._node===d)return b.push(a),!0})||b.push(new r(d)):b.push(void 0)})(c)}return b}},refreshAll:function(){q.forEach(function(a){return a.refresh()})},removeOne:function(a){if(!(a instanceof HTMLElement)){if(!a.length||!a[0])return;a=a[0]}q.some(function(b){if(b._node===a)return b.remove(),!0})},remove:function(a){if(a instanceof HTMLElement&&(a=[a]),a.length)for(var b=0;b<a.length;b++)!function(b){var c=a[b];q.some(function(a){if(a._node===c)return a.remove(),!0})}(b)},removeAll:function(){for(;q.length;)q[0].remove()}};i||g(),"undefined"!=typeof module&&module.exports?module.exports=s:j&&(a.Stickyfill=s)}(window,document);